
<!-- badges: start -->

[![R-CMD-check](https://github.com/caravagnalab/pkgTemplate/workflows/R-CMD-check/badge.svg)](https://github.com/caravagnalab/pkgTemplate/actions)
[![R-CMD-check](https://github.com/elena-buscaroli/pkgTemplate/workflows/R-CMD-check/badge.svg)](https://github.com/elena-buscaroli/pkgTemplate/actions)
<!-- badges: end -->

## Template for a R Package repository

Content related to the package:

-   `DESCRIPTION`: contains information about the package
    name/description and dependencies. `Imports` is used to import CRAN
    packages, while dependencies installed from github must be present
    also in the `Remotes` field.

-   `NAMESPACE`: contains all the imported packages and functions.
    Automatically generated by `devtools::document()`, should not be
    modified.

-   `man`: contains the manual reference for the exported functions.
    Automatically generated by `devtools::document()` and files should
    not be modified.

-   `R`: contains all the `R` scripts of the package.

## To create an empty package from RStudio

1.  `File`
2.  `New Project`
3.  `New Directory`
4.  `R Package`
5.  Set the package name and the location on disk

## Other functions

To load the functions without installing the package (from inside the
package directory):

-   `devtools::load_all()`

To document the package with Roxygen (updating `NAMESPACE` and the
manual):

-   `devtools::document()`

To add a dataset to the package:

-   `usethis::use_data(trees)` to add the object `trees` as package
    data.

To build the site locally:

-   `pkgdown::build_site()`

    Calling `build_site()` will generate a folder `docs` with the
    `.html` files of the website built locally. If the GitHub Actions
    workflow to build the website is working (`pkgdown` in this
    repository), the website will be automatically built each time a
    change is pushed, so `docs` should be in the `.gitignore` since it
    is not useful.

To create an article:

-   `usethis::use_article("hello")`

    This will generate a file `hello.Rmd` in the `vignettes` folder.

## To setup the GitHub actions workflows

For each GitHub actions workflow, a file `.yml` is generated in
`.github/workflows/`. The `.yml` contains a set of processes and
commands run automatically each time a change is pushed in the
repository.

### `R-CMD-check` workflow

`usethis::use_github_action_check_standard()` will create a workflow
(with the `.yml` file) for the R CMD check. Each time a change is
pushed, it will check check if the package can be build and installed.
Note: by default, it will report an error even if only warnings are
returned. To report a `fail` in the workflow only if errors are raised,
change the last “process” in the `.yml` as follows:

      - uses: r-lib/actions/check-r-package@v1
        with:
          error-on: '"error"'

### `pkgdown` workflow

## References

Good reference to build a R package. In particular the sections
`Git and GitHub` and `Automated checking`.
